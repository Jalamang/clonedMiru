{"ast":null,"code":"var _jsxFileName = \"/Users/jalamangjankagmail.com/8-0/module-6/Miru/front-end/src/components/Content.js\",\n    _s = $RefreshSig$();\n\nimport { React, useState, useEffect } from \"react\";\nimport { instance } from \"../helpers/api\";\nimport ActivityCard from \"./ActivityCard\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API = process.env.REACT_APP_API_URL;\n\nconst Content = props => {\n  _s();\n\n  var _props$activities;\n\n  const [favorites, setFavorites] = useState([]);\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (props.isLogged) {\n      load();\n    }\n  }, []);\n\n  const load = () => {\n    instance.get(`${API}/activity/favorites`).then(response => {\n      console.log(response.data);\n      setFavorites(response.data);\n      props.funcFav(response.data);\n    }).catch(error => console.warn(\"catch\", error));\n  };\n\n  const handleFav = event => {\n    if (event.target.name === \"notFav\") {\n      console.log(\"clicked\");\n      instance.post(`${API}/activity/${event.target.id}/favorites`).then(() => {\n        load();\n      }).catch(error => {\n        console.warn(error);\n        alert(\"Please log in to you account to add favorites\");\n        navigate(\"/activity/login\");\n      });\n    } else {\n      //delete from back end\n      instance.delete(`${API}/activity/${event.target.id}/favorites`).then(() => {\n        load();\n      }).catch(error => {\n        console.warn(error);\n      }); //call load to render changes\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: (_props$activities = props.activities) === null || _props$activities === void 0 ? void 0 : _props$activities.map(activity => {\n      let isfavorites = false;\n\n      if (favorites.length > 0) {\n        isfavorites = favorites.some(fav => fav.activity_id === activity.id);\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: isfavorites ? \"fav\" : \"notFav\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"fa fa-heart\",\n          id: activity.id,\n          name: isfavorites ? \"fav\" : \"notFav\",\n          onClick: handleFav\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ActivityCard, {\n          activity: activity\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)]\n      }, activity.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false);\n};\n\n_s(Content, \"qQe+VwtMLL8+AVjiVCzM6QdsYLM=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Content;\nexport default Content;\n\nvar _c;\n\n$RefreshReg$(_c, \"Content\");","map":{"version":3,"names":["React","useState","useEffect","instance","ActivityCard","useNavigate","axios","API","process","env","REACT_APP_API_URL","Content","props","favorites","setFavorites","navigate","isLogged","load","get","then","response","console","log","data","funcFav","catch","error","warn","handleFav","event","target","name","post","id","alert","delete","activities","map","activity","isfavorites","length","some","fav","activity_id"],"sources":["/Users/jalamangjankagmail.com/8-0/module-6/Miru/front-end/src/components/Content.js"],"sourcesContent":["import { React, useState, useEffect } from \"react\";\nimport { instance } from \"../helpers/api\";\nimport ActivityCard from \"./ActivityCard\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nconst API = process.env.REACT_APP_API_URL;\n\nconst Content = (props) => {\n  const [favorites, setFavorites] = useState([]);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (props.isLogged) {\n      load();\n    }\n  }, []);\n\n  const load = () => {\n    instance\n      .get(`${API}/activity/favorites`)\n      .then((response) => {\n        console.log(response.data);\n        setFavorites(response.data);\n        props.funcFav(response.data);\n      })\n      .catch((error) => console.warn(\"catch\", error));\n  };\n\n  const handleFav = (event) => {\n    if (event.target.name === \"notFav\") {\n      console.log(\"clicked\");\n      instance\n        .post(`${API}/activity/${event.target.id}/favorites`)\n        .then(() => {\n          load();\n        })\n        .catch((error) => {\n          console.warn(error);\n          alert(\"Please log in to you account to add favorites\");\n          navigate(\"/activity/login\");\n        });\n    } else {\n      //delete from back end\n      instance\n        .delete(`${API}/activity/${event.target.id}/favorites`)\n        .then(() => {\n          load();\n        })\n        .catch((error) => {\n          console.warn(error);\n        });\n      //call load to render changes\n    }\n  };\n\n  return (\n    <>\n      {props.activities?.map((activity) => {\n        let isfavorites = false;\n        if (favorites.length > 0) {\n          isfavorites = favorites.some(\n            (fav) => fav.activity_id === activity.id\n          );\n        }\n        return (\n          <div key={activity.id} className={isfavorites ? \"fav\" : \"notFav\"}>\n            <button\n              className=\"fa fa-heart\"\n              id={activity.id}\n              name={isfavorites ? \"fav\" : \"notFav\"}\n              onClick={handleFav}\n            ></button>\n            <ActivityCard activity={activity} />\n          </div>\n        );\n      })}\n    </>\n  );\n};\n\nexport default Content;\n"],"mappings":";;;AAAA,SAASA,KAAT,EAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AACA,MAAMC,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,iBAAxB;;AAEA,MAAMC,OAAO,GAAIC,KAAD,IAAW;EAAA;;EAAA;;EACzB,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4Bb,QAAQ,CAAC,EAAD,CAA1C;EACA,MAAMc,QAAQ,GAAGV,WAAW,EAA5B;EAEAH,SAAS,CAAC,MAAM;IACd,IAAIU,KAAK,CAACI,QAAV,EAAoB;MAClBC,IAAI;IACL;EACF,CAJQ,EAIN,EAJM,CAAT;;EAMA,MAAMA,IAAI,GAAG,MAAM;IACjBd,QAAQ,CACLe,GADH,CACQ,GAAEX,GAAI,qBADd,EAEGY,IAFH,CAESC,QAAD,IAAc;MAClBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAArB;MACAT,YAAY,CAACM,QAAQ,CAACG,IAAV,CAAZ;MACAX,KAAK,CAACY,OAAN,CAAcJ,QAAQ,CAACG,IAAvB;IACD,CANH,EAOGE,KAPH,CAOUC,KAAD,IAAWL,OAAO,CAACM,IAAR,CAAa,OAAb,EAAsBD,KAAtB,CAPpB;EAQD,CATD;;EAWA,MAAME,SAAS,GAAIC,KAAD,IAAW;IAC3B,IAAIA,KAAK,CAACC,MAAN,CAAaC,IAAb,KAAsB,QAA1B,EAAoC;MAClCV,OAAO,CAACC,GAAR,CAAY,SAAZ;MACAnB,QAAQ,CACL6B,IADH,CACS,GAAEzB,GAAI,aAAYsB,KAAK,CAACC,MAAN,CAAaG,EAAG,YAD3C,EAEGd,IAFH,CAEQ,MAAM;QACVF,IAAI;MACL,CAJH,EAKGQ,KALH,CAKUC,KAAD,IAAW;QAChBL,OAAO,CAACM,IAAR,CAAaD,KAAb;QACAQ,KAAK,CAAC,+CAAD,CAAL;QACAnB,QAAQ,CAAC,iBAAD,CAAR;MACD,CATH;IAUD,CAZD,MAYO;MACL;MACAZ,QAAQ,CACLgC,MADH,CACW,GAAE5B,GAAI,aAAYsB,KAAK,CAACC,MAAN,CAAaG,EAAG,YAD7C,EAEGd,IAFH,CAEQ,MAAM;QACVF,IAAI;MACL,CAJH,EAKGQ,KALH,CAKUC,KAAD,IAAW;QAChBL,OAAO,CAACM,IAAR,CAAaD,KAAb;MACD,CAPH,EAFK,CAUL;IACD;EACF,CAzBD;;EA2BA,oBACE;IAAA,+BACGd,KAAK,CAACwB,UADT,sDACG,kBAAkBC,GAAlB,CAAuBC,QAAD,IAAc;MACnC,IAAIC,WAAW,GAAG,KAAlB;;MACA,IAAI1B,SAAS,CAAC2B,MAAV,GAAmB,CAAvB,EAA0B;QACxBD,WAAW,GAAG1B,SAAS,CAAC4B,IAAV,CACXC,GAAD,IAASA,GAAG,CAACC,WAAJ,KAAoBL,QAAQ,CAACL,EAD1B,CAAd;MAGD;;MACD,oBACE;QAAuB,SAAS,EAAEM,WAAW,GAAG,KAAH,GAAW,QAAxD;QAAA,wBACE;UACE,SAAS,EAAC,aADZ;UAEE,EAAE,EAAED,QAAQ,CAACL,EAFf;UAGE,IAAI,EAAEM,WAAW,GAAG,KAAH,GAAW,QAH9B;UAIE,OAAO,EAAEX;QAJX;UAAA;UAAA;UAAA;QAAA,QADF,eAOE,QAAC,YAAD;UAAc,QAAQ,EAAEU;QAAxB;UAAA;UAAA;UAAA;QAAA,QAPF;MAAA,GAAUA,QAAQ,CAACL,EAAnB;QAAA;QAAA;QAAA;MAAA,QADF;IAWD,CAlBA;EADH,iBADF;AAuBD,CAvED;;GAAMtB,O;UAEaN,W;;;KAFbM,O;AAyEN,eAAeA,OAAf"},"metadata":{},"sourceType":"module"}